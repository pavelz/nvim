stolen from [@shazow](https://github.com/shazow), mostly.
